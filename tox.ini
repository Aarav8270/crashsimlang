[tox]
envlist = py2.7

[testenv]
allowlist_externals = make
                      /bin/bash
usedevelop = true
deps =
  pytest
  coverage
  dill
  ply
  git+https://github.com/pkmoore/posix-omni-parser
commands =
   bash -c "if [ ! -f 'test/syscall_definitions.pickle' ]; then cd test/; parse_syscall_definitions; cd ..; fi"
   coverage erase
   coverage run --source=cslang --omit cslang/parsetab.py -m pytest
   coverage report -m
